<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Price Tables</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

  <!-- Header -->
  <header class="text-center py-8 px-4">
    <h1 class="text-4xl font-bold mb-2">ğŸ“ˆ Live Price Tables</h1>
    <p class="text-gray-600">Track Nifty, Bank Nifty, SENSEX, Dow Jones, and S&PÂ 500 in realâ€‘time.</p>
    <div class="text-sm text-gray-500 mt-2">
      Last updated: <span id="update-time"></span> IST | Autoâ€‘refreshes every 30 seconds
    </div>
    <div class="mt-6 flex justify-center gap-4">
      <button class="tab-button px-4 py-2 rounded-md bg-blue-600 text-white" onclick="showTab('indian', event)">
        ğŸ‡®ğŸ‡³ Indian Indices
      </button>
      <button class="tab-button px-4 py-2 rounded-md bg-gray-200" onclick="showTab('global', event)">
        ğŸŒ Global Indices
      </button>
    </div>
  </header>

  <!-- Indian Indices -->
  <section id="indian" class="max-w-6xl mx-auto px-4">
    <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 mb-8">
      <!-- Nifty 50 -->
      <div class="bg-white p-4 rounded-xl shadow">
        <iframe 
          src="https://s.tradingview.com/embed-widget/mini-symbol-overview/?locale=en#%7B%22symbol%22%3A%22NSE%3ANIFTY%22%2C%22width%22%3A%22280%22%2C%22height%22%3A%22150%22%2C%22dateRange%22%3A%221D%22%2C%22colorTheme%22%3A%22light%22%7D" 
          width="100%" height="150" frameborder="0" allowtransparency="true" scrolling="no">
        </iframe>
      </div>

      <!-- Bank Nifty -->
      <div class="bg-white p-4 rounded-xl shadow">
        <iframe 
          src="https://s.tradingview.com/embed-widget/mini-symbol-overview/?locale=en#%7B%22symbol%22%3A%22NSE%3ABANKNIFTY%22%2C%22width%22%3A%22280%22%2C%22height%22%3A%22150%22%2C%22dateRange%22%3A%221D%22%2C%22colorTheme%22%3A%22light%22%7D" 
          width="100%" height="150" frameborder="0" allowtransparency="true" scrolling="no">
        </iframe>
      </div>

      <!-- SENSEX -->
      <div class="bg-white p-4 rounded-xl shadow">
        <iframe 
          src="https://s.tradingview.com/embed-widget/mini-symbol-overview/?locale=en#%7B%22symbol%22%3A%22BSE%3ASENSEX%22%2C%22width%22%3A%22280%22%2C%22height%22%3A%22150%22%2C%22dateRange%22%3A%221D%22%2C%22colorTheme%22%3A%22light%22%7D" 
          width="100%" height="150" frameborder="0" allowtransparency="true" scrolling="no">
        </iframe>
      </div>
    </div>

    <!-- Indian Table -->
    <div class="bg-white rounded-xl shadow overflow-x-auto">
      <table class="w-full text-left border-collapse text-sm">
        <thead class="bg-gray-50 text-gray-700">
          <tr>
            <th class="px-4 py-3">Index</th>
            <th class="px-4 py-3">Current</th>
            <th class="px-4 py-3">High</th>
            <th class="px-4 py-3">Low</th>
            <th class="px-4 py-3">% Change</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-t">
            <td class="px-4 py-2">Nifty 50</td>
            <td class="px-4 py-2" id="nifty-current">â€”</td>
            <td class="px-4 py-2" id="nifty-high">â€”</td>
            <td class="px-4 py-2" id="nifty-low">â€”</td>
            <td class="px-4 py-2" id="nifty-change">â€”</td>
          </tr>
          <tr class="border-t">
            <td class="px-4 py-2">Bank Nifty</td>
            <td class="px-4 py-2" id="banknifty-current">â€”</td>
            <td class="px-4 py-2" id="banknifty-high">â€”</td>
            <td class="px-4 py-2" id="banknifty-low">â€”</td>
            <td class="px-4 py-2" id="banknifty-change">â€”</td>
          </tr>
          <tr class="border-t">
            <td class="px-4 py-2">SENSEX</td>
            <td class="px-4 py-2" id="sensex-current">â€”</td>
            <td class="px-4 py-2" id="sensex-high">â€”</td>
            <td class="px-4 py-2" id="sensex-low">â€”</td>
            <td class="px-4 py-2" id="sensex-change">â€”</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Global Indices -->
  <section id="global" class="max-w-6xl mx-auto px-4 hidden">
    <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 mb-8">
      <!-- Dow Jones -->
      <div class="bg-white p-4 rounded-xl shadow">
        <iframe 
          src="https://s.tradingview.com/embed-widget/mini-symbol-overview/?locale=en#%7B%22symbol%22%3A%22INDEX%3ADJI%22%2C%22width%22%3A%22280%22%2C%22height%22%3A%22150%22%2C%22dateRange%22%3A%221D%22%2C%22colorTheme%22%3A%22light%22%7D" 
          width="100%" height="150" frameborder="0" allowtransparency="true" scrolling="no">
        </iframe>
      </div>

      <!-- S&P 500 -->
      <div class="bg-white p-4 rounded-xl shadow">
        <iframe 
          src="https://s.tradingview.com/embed-widget/mini-symbol-overview/?locale=en#%7B%22symbol%22%3A%22INDEX%3ASPX%22%2C%22width%22%3A%22280%22%2C%22height%22%3A%22150%22%2C%22dateRange%22%3A%221D%22%2C%22colorTheme%22%3A%22light%22%7D" 
          width="100%" height="150" frameborder="0" allowtransparency="true" scrolling="no">
        </iframe>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center text-sm text-gray-500 py-6">
    Made with â¤ for Smart Money Traders | Â©Â 2025
  </footer>

  <!-- JavaScript -->
  <script>
    function showTab(id, event) {
      document.querySelectorAll('section[id]').forEach(s => s.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('bg-blue-600', 'text-white', 'bg-gray-200'));
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.add('bg-gray-200'));
      event.target.classList.remove('bg-gray-200');
      event.target.classList.add('bg-blue-600', 'text-white');
    }

    function updateTime() {
      const now = new Date();
      const str = now.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
      document.getElementById('update-time').textContent = str;
    }

    async function fetchLiveData() {
      try {
        const res = await fetch('https://nse-live-api-4.onrender.com/api/indices');
        const data = await res.json();

        document.getElementById('nifty-current').textContent = data.nifty.current;
        document.getElementById('nifty-high').textContent = data.nifty.high;
        document.getElementById('nifty-low').textContent = data.nifty.low;
        document.getElementById('nifty-change').textContent = data.nifty.change;

        document.getElementById('banknifty-current').textContent = data.banknifty.current;
        document.getElementById('banknifty-high').textContent = data.banknifty.high;
        document.getElementById('banknifty-low').textContent = data.banknifty.low;
        document.getElementById('banknifty-change').textContent = data.banknifty.change;

        document.getElementById('sensex-current').textContent = data.sensex.current;
        document.getElementById('sensex-high').textContent = data.sensex.high;
        document.getElementById('sensex-low').textContent = data.sensex.low;
        document.getElementById('sensex-change').textContent = data.sensex.change;

        updateTime();
      } catch (error) {
        console.error("Failed to fetch API data:", error);
      }
    }

    fetchLiveData();
    setInterval(fetchLiveData, 30000);
  </script>
</body>
</html>
